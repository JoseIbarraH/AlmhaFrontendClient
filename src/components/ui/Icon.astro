---
import * as icons from "lucide-static";

interface Props {
  name: string;
  class?: string;
  size?: number;
}

const { name, class: className = "", size = 24 } = Astro.props;

const iconName = name
  .split('-')
  .map(w => w.charAt(0).toUpperCase() + w.slice(1))
  .join('');

const svg = icons[iconName as keyof typeof icons];

if (!svg) {
  console.warn(`Icon "${name}" (${iconName}) not found`);
}
---

{svg ? (
  <div
    class={`icon-wrapper inline-block ${className}`}
    style={`width: ${size}px; height: ${size}px;`}
    set:html={svg}
  />
) : (
  <div
    class={`inline-block bg-red-500 ${className}`}
    style={`width: ${size}px; height: ${size}px;`}
    title={`Icon ${name} not found`}
  />
)}

<style>
  .icon-wrapper svg {
    width: 100%;
    height: 100%;
    display: block;
  }
</style>
